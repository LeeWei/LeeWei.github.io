<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>高德地图--控件的封装--1 | LeeWei</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="时光荏苒，不容辜负">
    <link rel="preload" href="/assets/css/0.styles.3d861c3a.css" as="style"><link rel="preload" href="/assets/js/app.7d901b5e.js" as="script"><link rel="preload" href="/assets/js/2.06a2725e.js" as="script"><link rel="preload" href="/assets/js/23.79335352.js" as="script"><link rel="prefetch" href="/assets/js/10.70dd4784.js"><link rel="prefetch" href="/assets/js/11.17ceb3a1.js"><link rel="prefetch" href="/assets/js/12.027b01f6.js"><link rel="prefetch" href="/assets/js/13.c709186e.js"><link rel="prefetch" href="/assets/js/14.78644367.js"><link rel="prefetch" href="/assets/js/15.015c1fa5.js"><link rel="prefetch" href="/assets/js/16.a5524904.js"><link rel="prefetch" href="/assets/js/17.6422e408.js"><link rel="prefetch" href="/assets/js/18.4e9f34a3.js"><link rel="prefetch" href="/assets/js/19.c0ee2b68.js"><link rel="prefetch" href="/assets/js/20.49f85742.js"><link rel="prefetch" href="/assets/js/21.1d2d098f.js"><link rel="prefetch" href="/assets/js/22.2ad8915e.js"><link rel="prefetch" href="/assets/js/24.c4318513.js"><link rel="prefetch" href="/assets/js/25.7e150338.js"><link rel="prefetch" href="/assets/js/26.e84ed601.js"><link rel="prefetch" href="/assets/js/27.b8cd0ca2.js"><link rel="prefetch" href="/assets/js/28.d8132e9a.js"><link rel="prefetch" href="/assets/js/29.efd4fe18.js"><link rel="prefetch" href="/assets/js/3.42d0a277.js"><link rel="prefetch" href="/assets/js/30.9dcb72e7.js"><link rel="prefetch" href="/assets/js/31.80327726.js"><link rel="prefetch" href="/assets/js/32.afe039d9.js"><link rel="prefetch" href="/assets/js/33.d3f5b913.js"><link rel="prefetch" href="/assets/js/34.d25afac4.js"><link rel="prefetch" href="/assets/js/35.96a61632.js"><link rel="prefetch" href="/assets/js/36.e3021659.js"><link rel="prefetch" href="/assets/js/37.171e55c8.js"><link rel="prefetch" href="/assets/js/38.20197aa0.js"><link rel="prefetch" href="/assets/js/39.f295f048.js"><link rel="prefetch" href="/assets/js/4.880d621f.js"><link rel="prefetch" href="/assets/js/40.e9c492b5.js"><link rel="prefetch" href="/assets/js/41.dab7f199.js"><link rel="prefetch" href="/assets/js/42.3cc57c31.js"><link rel="prefetch" href="/assets/js/43.bc73774d.js"><link rel="prefetch" href="/assets/js/44.5979dbbd.js"><link rel="prefetch" href="/assets/js/45.82bb6608.js"><link rel="prefetch" href="/assets/js/46.9e8ff3cd.js"><link rel="prefetch" href="/assets/js/47.bd31e67c.js"><link rel="prefetch" href="/assets/js/48.aba7685f.js"><link rel="prefetch" href="/assets/js/49.7dccbe8a.js"><link rel="prefetch" href="/assets/js/5.14cd14b8.js"><link rel="prefetch" href="/assets/js/50.b8eb05b4.js"><link rel="prefetch" href="/assets/js/51.ae2bce1a.js"><link rel="prefetch" href="/assets/js/52.12fd6a7e.js"><link rel="prefetch" href="/assets/js/53.0c2fac0c.js"><link rel="prefetch" href="/assets/js/54.ac6462fa.js"><link rel="prefetch" href="/assets/js/55.a3d3a858.js"><link rel="prefetch" href="/assets/js/56.d11a53cb.js"><link rel="prefetch" href="/assets/js/57.222d7dfe.js"><link rel="prefetch" href="/assets/js/58.7293170e.js"><link rel="prefetch" href="/assets/js/59.ff962efc.js"><link rel="prefetch" href="/assets/js/6.3bad40c8.js"><link rel="prefetch" href="/assets/js/60.6a3d63bc.js"><link rel="prefetch" href="/assets/js/61.b2f8e57a.js"><link rel="prefetch" href="/assets/js/62.a22cb1dc.js"><link rel="prefetch" href="/assets/js/63.ea10f1a8.js"><link rel="prefetch" href="/assets/js/64.bce9b53b.js"><link rel="prefetch" href="/assets/js/65.8da84c46.js"><link rel="prefetch" href="/assets/js/66.7f1090f8.js"><link rel="prefetch" href="/assets/js/67.e1cbc56e.js"><link rel="prefetch" href="/assets/js/68.052910c2.js"><link rel="prefetch" href="/assets/js/69.e2f2886b.js"><link rel="prefetch" href="/assets/js/7.6e1a4025.js"><link rel="prefetch" href="/assets/js/70.07395612.js"><link rel="prefetch" href="/assets/js/71.6fd275b7.js"><link rel="prefetch" href="/assets/js/72.24385907.js"><link rel="prefetch" href="/assets/js/73.e134522b.js"><link rel="prefetch" href="/assets/js/74.1c6f77cf.js"><link rel="prefetch" href="/assets/js/8.ad5e7d31.js"><link rel="prefetch" href="/assets/js/9.a1c6328b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.3d861c3a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/headLogo.png" alt="LeeWei" class="logo"> <span class="site-name can-hide">LeeWei</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/technology-sharing/html+css/" class="nav-link">
  html+css
</a></li><li class="dropdown-item"><!----> <a href="/technology-sharing/js/" class="nav-link">
  js基础入门
</a></li><li class="dropdown-item"><!----> <a href="/technology-sharing/jquery/" class="nav-link">
  jquery
</a></li><li class="dropdown-item"><!----> <a href="/technology-sharing/es6/" class="nav-link">
  es6
</a></li><li class="dropdown-item"><!----> <a href="/technology-sharing/vue/" class="nav-link">
  全面拥抱Vue
</a></li><li class="dropdown-item"><!----> <a href="/technology-sharing/React/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/technology-sharing/ts/" class="nav-link">
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/technology-sharing/wx/" class="nav-link">
  微信小程序
</a></li><li class="dropdown-item"><!----> <a href="/technology-sharing/node/" class="nav-link">
  node.js
</a></li><li class="dropdown-item"><!----> <a href="/technology-sharing/webpack/" class="nav-link">
  webpack
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/technology-sharing/php/" class="nav-link">
  php
</a></li><li class="dropdown-item"><!----> <a href="/technology-sharing/JAVA/" class="nav-link">
  JAVA
</a></li></ul></div></div><div class="nav-item"><a href="/technology-sharing/jsDir/" class="nav-link router-link-active">
  js公共方法
</a></div><div class="nav-item"><a href="/technology-sharing/bigData/" class="nav-link">
  大数据
</a></div><div class="nav-item"><a href="/tools/" class="nav-link">
  实用工具
</a></div><div class="nav-item"><a href="/About/" class="nav-link">
  关于我
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/technology-sharing/html+css/" class="nav-link">
  html+css
</a></li><li class="dropdown-item"><!----> <a href="/technology-sharing/js/" class="nav-link">
  js基础入门
</a></li><li class="dropdown-item"><!----> <a href="/technology-sharing/jquery/" class="nav-link">
  jquery
</a></li><li class="dropdown-item"><!----> <a href="/technology-sharing/es6/" class="nav-link">
  es6
</a></li><li class="dropdown-item"><!----> <a href="/technology-sharing/vue/" class="nav-link">
  全面拥抱Vue
</a></li><li class="dropdown-item"><!----> <a href="/technology-sharing/React/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/technology-sharing/ts/" class="nav-link">
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/technology-sharing/wx/" class="nav-link">
  微信小程序
</a></li><li class="dropdown-item"><!----> <a href="/technology-sharing/node/" class="nav-link">
  node.js
</a></li><li class="dropdown-item"><!----> <a href="/technology-sharing/webpack/" class="nav-link">
  webpack
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/technology-sharing/php/" class="nav-link">
  php
</a></li><li class="dropdown-item"><!----> <a href="/technology-sharing/JAVA/" class="nav-link">
  JAVA
</a></li></ul></div></div><div class="nav-item"><a href="/technology-sharing/jsDir/" class="nav-link router-link-active">
  js公共方法
</a></div><div class="nav-item"><a href="/technology-sharing/bigData/" class="nav-link">
  大数据
</a></div><div class="nav-item"><a href="/tools/" class="nav-link">
  实用工具
</a></div><div class="nav-item"><a href="/About/" class="nav-link">
  关于我
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>JS公共方法</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/technology-sharing/jsDir/" aria-current="page" class="sidebar-link">前端常用的公共方法</a></li><li><a href="/technology-sharing/jsDir/1.check.html" class="sidebar-link">判断变量的方法&amp;&amp;正则验证方法</a></li><li><a href="/technology-sharing/jsDir/2.gaode_1.html" aria-current="page" class="active sidebar-link">高德地图--控件的封装--1</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/technology-sharing/jsDir/2.gaode_1.html#前言" class="sidebar-link">前言</a></li><li class="sidebar-sub-header"><a href="/technology-sharing/jsDir/2.gaode_1.html#涉及方向" class="sidebar-link">涉及方向</a></li><li class="sidebar-sub-header"><a href="/technology-sharing/jsDir/2.gaode_1.html#正题" class="sidebar-link">正题</a></li><li class="sidebar-sub-header"><a href="/technology-sharing/jsDir/2.gaode_1.html#_1-marker点以及信息窗体" class="sidebar-link">1.marker点以及信息窗体</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/technology-sharing/jsDir/2.gaode_1.html#效果展示" class="sidebar-link">效果展示</a></li><li class="sidebar-sub-header"><a href="/technology-sharing/jsDir/2.gaode_1.html#_1-事先我们需要提前准备这样一段css样式" class="sidebar-link">(1)事先我们需要提前准备这样一段css样式</a></li><li class="sidebar-sub-header"><a href="/technology-sharing/jsDir/2.gaode_1.html#_2-接下来就是我们需要的js文件" class="sidebar-link">(2)接下来就是我们需要的js文件</a></li><li class="sidebar-sub-header"><a href="/technology-sharing/jsDir/2.gaode_1.html#_3-信息窗体的信息格式" class="sidebar-link">(3)信息窗体的信息格式</a></li><li class="sidebar-sub-header"><a href="/technology-sharing/jsDir/2.gaode_1.html#_4-调用方法" class="sidebar-link">(4)调用方法</a></li></ul></li></ul></li><li><a href="/technology-sharing/jsDir/3.gaode_2.html" class="sidebar-link">高德地图--控件的封装--2</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="前言"><a href="#前言" class="header-anchor">#</a> 前言</h2> <blockquote><p>随着地图的普及，可能也有许多和我一样的初学者，在了解常见的地图控件时花费了很多力气。所以，今天主要分享一些关于地图控件的插件封装。</p></blockquote> <h2 id="涉及方向"><a href="#涉及方向" class="header-anchor">#</a> 涉及方向</h2> <blockquote><p>今天主要以高德地图作为主要的学习方向，随后的分享中也会把百度地图加入。目前我就假设大家都了解过了地图。只是受限于插件的封装等等。本人也学识浅薄，希望有什么问题大家可以指出。以便日后改进。</p></blockquote> <h2 id="正题"><a href="#正题" class="header-anchor">#</a> 正题</h2> <blockquote><p>三个部分
1.地图中marker点以及信息窗体
2.地图中相关控件的实例
3.地图中鼠标样式的切换---最为简单，只是顺带一说。</p></blockquote> <h2 id="_1-marker点以及信息窗体"><a href="#_1-marker点以及信息窗体" class="header-anchor">#</a> 1.marker点以及信息窗体</h2> <h3 id="效果展示"><a href="#效果展示" class="header-anchor">#</a> 效果展示</h3> <p><img src="https://upload-images.jianshu.io/upload_images/17304901-fd10b91e28287b2a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="mark.png"></p> <h3 id="_1-事先我们需要提前准备这样一段css样式"><a href="#_1-事先我们需要提前准备这样一段css样式" class="header-anchor">#</a> (1)事先我们需要提前准备这样一段css样式</h3> <div class="language-css line-numbers-mode"><pre class="language-css"><code>        <span class="token selector">html,
        body,
        #container</span> <span class="token punctuation">{</span>
            <span class="token property">height</span><span class="token punctuation">:</span> 98%<span class="token punctuation">;</span>
            <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token selector">.content-window-card</span> <span class="token punctuation">{</span>
            <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
            <span class="token property">box-shadow</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
            <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
            <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
            <span class="token property">width</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>
            <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token selector">.content-window-card p</span> <span class="token punctuation">{</span>
            <span class="token property">height</span><span class="token punctuation">:</span> 2rem<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token selector">.custom-info</span> <span class="token punctuation">{</span>
            <span class="token property">border</span><span class="token punctuation">:</span> solid 1px silver<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token selector">div.info-top</span> <span class="token punctuation">{</span>
            <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
            <span class="token property">background</span><span class="token punctuation">:</span> none repeat scroll 0 0 #F9F9F9<span class="token punctuation">;</span>
            <span class="token property">border-bottom</span><span class="token punctuation">:</span> 1px solid #CCC<span class="token punctuation">;</span>
            <span class="token property">border-radius</span><span class="token punctuation">:</span> 5px 5px 0 0<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token selector">div.info-top div</span> <span class="token punctuation">{</span>
            <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
            <span class="token property">color</span><span class="token punctuation">:</span> #333333<span class="token punctuation">;</span>
            <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
            <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>
            <span class="token property">line-height</span><span class="token punctuation">:</span> 31px<span class="token punctuation">;</span>
            <span class="token property">padding</span><span class="token punctuation">:</span> 0 10px<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token selector">div.info-top img</span> <span class="token punctuation">{</span>
            <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
            <span class="token property">top</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
            <span class="token property">right</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
            <span class="token property">transition-duration</span><span class="token punctuation">:</span> 0.25s<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token selector">div.info-top img:hover</span> <span class="token punctuation">{</span>
            <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0px 0px 5px #000<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token selector">div.info-middle</span> <span class="token punctuation">{</span>
            <span class="token property">font-size</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
            <span class="token property">padding</span><span class="token punctuation">:</span> 10px 6px<span class="token punctuation">;</span>
            <span class="token property">line-height</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token selector">div.info-bottom</span> <span class="token punctuation">{</span>
            <span class="token property">height</span><span class="token punctuation">:</span> 0px<span class="token punctuation">;</span>
            <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
            <span class="token property">clear</span><span class="token punctuation">:</span> both<span class="token punctuation">;</span>
            <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token selector">div.info-bottom img</span> <span class="token punctuation">{</span>
            <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
            <span class="token property">z-index</span><span class="token punctuation">:</span> 104<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token selector">span</span> <span class="token punctuation">{</span>
            <span class="token property">margin-left</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
            <span class="token property">font-size</span><span class="token punctuation">:</span> 11px<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token selector">.info-middle img</span> <span class="token punctuation">{</span>
            <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>
            <span class="token property">margin-right</span><span class="token punctuation">:</span> 6px<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br></div></div><h3 id="_2-接下来就是我们需要的js文件"><a href="#_2-接下来就是我们需要的js文件" class="header-anchor">#</a> (2)接下来就是我们需要的js文件</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**  
 * 放置makeer  带信息提示框 
 * @param {*} obj 对象形式
 * @param {*} obj.how  哪个实例的地图调用
 * @param {*} obj.position  地图的定位点 数组形式 [lng,lat]
 * @param {*} obj.title     窗体的头部标题
 * @param {*} obj.content   窗体的内部信息 数组形式  ex：如果是段落形式，需要将段落分开作为数组元素依次放入。
 * @param {*} obj.flag      标记点显示样式 默认false 蓝色
 */</span>
<span class="token keyword">function</span> <span class="token function">getAMarker</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">addMarker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//添加marker标记</span>
    <span class="token keyword">function</span> <span class="token function">addMarker</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> icon <span class="token operator">=</span> <span class="token string">&quot;https://webapi.amap.com/theme/v1.3/markers/n/mark_r.png&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> icon <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">var</span> marker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AMap<span class="token punctuation">.</span>Marker</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            map<span class="token operator">:</span> obj<span class="token punctuation">.</span>how<span class="token punctuation">,</span>
            position<span class="token operator">:</span> obj<span class="token punctuation">.</span>position<span class="token punctuation">,</span>
            icon<span class="token operator">:</span> icon<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 调用设置窗体</span>
        <span class="token keyword">var</span> infoWindow <span class="token operator">=</span> <span class="token function">setInfo</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>title<span class="token punctuation">,</span> obj<span class="token punctuation">.</span>content<span class="token punctuation">)</span>
        <span class="token comment">//鼠标点击marker弹出自定义的信息窗体</span>
        AMap<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span>marker<span class="token punctuation">,</span> <span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            infoWindow<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>how<span class="token punctuation">,</span> marker<span class="token punctuation">.</span><span class="token function">getPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 设置我们想要的窗体</span>
    <span class="token keyword">function</span> <span class="token function">setInfo</span><span class="token punctuation">(</span><span class="token parameter">title<span class="token punctuation">,</span> content</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> infoWindow <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AMap<span class="token punctuation">.</span>InfoWindow</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            isCustom<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//使用自定义窗体</span>
            content<span class="token operator">:</span> <span class="token function">createInfoWindow</span><span class="token punctuation">(</span>title<span class="token punctuation">,</span> content<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;br/&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            offset<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">AMap<span class="token punctuation">.</span>Pixel</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">45</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> infoWindow<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//构建自定义信息窗体</span>
    <span class="token keyword">function</span> <span class="token function">createInfoWindow</span><span class="token punctuation">(</span><span class="token parameter">title<span class="token punctuation">,</span> content</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> info <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        info<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">&quot;custom-info input-card content-window-card&quot;</span><span class="token punctuation">;</span>

        <span class="token comment">//可以通过下面的方式修改自定义窗体的宽高</span>
        info<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token string">&quot;250px&quot;</span><span class="token punctuation">;</span>
        <span class="token comment">// 定义顶部标题</span>
        <span class="token keyword">var</span> top <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> titleD <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> closeX <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;img&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        top<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">&quot;info-top&quot;</span><span class="token punctuation">;</span>
        titleD<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> title<span class="token punctuation">;</span>
        closeX<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">&quot;https://webapi.amap.com/images/close2.gif&quot;</span><span class="token punctuation">;</span>
        closeX<span class="token punctuation">.</span>onclick <span class="token operator">=</span> closeInfoWindow<span class="token punctuation">;</span>

        top<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>titleD<span class="token punctuation">)</span><span class="token punctuation">;</span>
        top<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>closeX<span class="token punctuation">)</span><span class="token punctuation">;</span>
        info<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>top<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 定义中部内容</span>
        <span class="token keyword">var</span> middle <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        middle<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">&quot;info-middle&quot;</span><span class="token punctuation">;</span>
        middle<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token string">'white'</span><span class="token punctuation">;</span>
        middle<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> content<span class="token punctuation">;</span>
        info<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>middle<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 定义底部内容</span>
        <span class="token keyword">var</span> bottom <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bottom<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">&quot;info-bottom&quot;</span><span class="token punctuation">;</span>
        bottom<span class="token punctuation">.</span>style<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token string">'relative'</span><span class="token punctuation">;</span>
        bottom<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token string">'0px'</span><span class="token punctuation">;</span>
        bottom<span class="token punctuation">.</span>style<span class="token punctuation">.</span>margin <span class="token operator">=</span> <span class="token string">'0 auto'</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> sharp <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;img&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        sharp<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">&quot;https://webapi.amap.com/images/sharp.png&quot;</span><span class="token punctuation">;</span>
        bottom<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>sharp<span class="token punctuation">)</span><span class="token punctuation">;</span>
        info<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>bottom<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> info<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//关闭信息窗体</span>
    <span class="token keyword">function</span> <span class="token function">closeInfoWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        obj<span class="token punctuation">.</span>how<span class="token punctuation">.</span><span class="token function">clearInfoWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br></div></div><h3 id="_3-信息窗体的信息格式"><a href="#_3-信息窗体的信息格式" class="header-anchor">#</a> (3)信息窗体的信息格式</h3> <h5 id="只要有段落，就以数组元素形式写入"><a href="#只要有段落，就以数组元素形式写入" class="header-anchor">#</a> 只要有段落，就以数组元素形式写入</h5> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
    title<span class="token operator">:</span> <span class="token string">'长宁路&lt;span style=&quot;font-size:11px;color:#F00;&quot;&gt;价格:666&lt;/span&gt;'</span><span class="token punctuation">,</span>
    content<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;&lt;img src='http://tpc.googlesyndication.com/simgad/5843493769827749134'&gt;地址：长宁路&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;电话：151-45561&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&lt;a href='https://www.baidu.com'&gt;详细信息&lt;/a&gt;&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_4-调用方法"><a href="#_4-调用方法" class="header-anchor">#</a> (4)调用方法</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AMap<span class="token punctuation">.</span>Map</span><span class="token punctuation">(</span><span class="token string">&quot;container&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            resizeEnable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            center<span class="token operator">:</span><span class="token punctuation">[</span>lng<span class="token punctuation">,</span> lat<span class="token punctuation">]</span><span class="token punctuation">,</span>
            zoom<span class="token operator">:</span> <span class="token number">13</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">getAMarker</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            how<span class="token operator">:</span> map<span class="token punctuation">,</span>
            position<span class="token operator">:</span> <span class="token punctuation">[</span>lng<span class="token punctuation">,</span> lat<span class="token punctuation">]</span><span class="token punctuation">,</span>
            title<span class="token operator">:</span> data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>title<span class="token punctuation">,</span>
            content<span class="token operator">:</span> data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>content<span class="token punctuation">,</span>
            flag<span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><blockquote><p>###差不多第一个组件的封装已经完成。下次会将另外两个插件进行封装。希望大家可以指出我的不足，以后会加以改正。</p></blockquote></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/technology-sharing/jsDir/1.check.html" class="prev">
        判断变量的方法&amp;&amp;正则验证方法
      </a></span> <span class="next"><a href="/technology-sharing/jsDir/3.gaode_2.html">
        高德地图--控件的封装--2
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.7d901b5e.js" defer></script><script src="/assets/js/2.06a2725e.js" defer></script><script src="/assets/js/23.79335352.js" defer></script>
  </body>
</html>
